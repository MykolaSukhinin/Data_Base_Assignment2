
EXPLAIN ANALYZE
SELECT DISTINCT 
    t.id,
    t.first_name,
    t.last_name,
    t.specialization,
    t.hire_date
FROM teachers t
WHERE t.id IN (
    SELECT s.teacher_id
    FROM students s
    WHERE YEAR(s.enrollment_date) = 2023
    AND s.teacher_id IN (
        SELECT t2.id
        FROM teachers t2
        WHERE t2.university_id IN (
            SELECT u.id
            FROM universities u
            WHERE u.country = 'Ukraine'
        )
    )
)
ORDER BY t.last_name, t.first_name;
